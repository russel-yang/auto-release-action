{"version":3,"file":"main.js","sources":["../../src/main.ts"],"sourcesContent":["import * as github from \"@actions/github\";\nimport * as core from \"@actions/core\";\n\nconst token = core.getInput(\"token\");\nconst head = core.getInput(\"head\");\nconst base = core.getInput(\"base\");\nconst develop_branch = core.getInput(\"develop_branch\");\nconst title = core.getInput(\"title\");\nconst body = core.getInput(\"body\");\n\nasync function main() {\n  console.log(\"auto release\");\n\n  const { owner, repo } = github.context.repo;\n\n  const octokit = github.getOctokit(token);\n\n  const developRef = await octokit.git.getRef({\n    owner,\n    repo,\n    ref: `heads/${develop_branch}`,\n  });\n\n  try {\n    const ref = await octokit.git.getRef({\n      owner,\n      repo,\n      ref: `heads/${head}`,\n    });\n  } catch (err) {\n    if (err.status === 404) {\n      await octokit.git.createRef({\n        owner,\n        repo,\n        ref: `refs/heads/${head}`,\n        sha: developRef.data.object.sha,\n      });\n\n      const pullrequest = await octokit.pulls.create({\n        owner,\n        repo,\n        head: `refs/heads/${head}`,\n        base: `refs/heads/${base}`,\n        title,\n        body,\n      });\n      console.log(pullrequest);\n    }\n  }\n}\n\nmain();\n"],"names":[],"mappings":";;;;AAAA,8DAA0C;AAC1C,0DAAsC;AAEtC,IAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;AACrC,IAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AACnC,IAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AACnC,IAAM,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;AACvD,IAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;AACrC,IAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AAEnC,SAAe,IAAI;;;;;;oBACjB,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;oBAEtB,KAAkB,MAAM,CAAC,OAAO,CAAC,IAAI,EAAnC,KAAK,WAAA,EAAE,IAAI,UAAA,CAAyB;oBAEtC,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;oBAEtB,qBAAM,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC;4BAC1C,KAAK,OAAA;4BACL,IAAI,MAAA;4BACJ,GAAG,EAAE,WAAS,cAAgB;yBAC/B,CAAC,EAAA;;oBAJI,UAAU,GAAG,SAIjB;;;;oBAGY,qBAAM,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC;4BACnC,KAAK,OAAA;4BACL,IAAI,MAAA;4BACJ,GAAG,EAAE,WAAS,IAAM;yBACrB,CAAC,EAAA;;oBAJI,GAAG,GAAG,SAIV;;;;0BAEE,KAAG,CAAC,MAAM,KAAK,GAAG,CAAA,EAAlB,wBAAkB;oBACpB,qBAAM,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC;4BAC1B,KAAK,OAAA;4BACL,IAAI,MAAA;4BACJ,GAAG,EAAE,gBAAc,IAAM;4BACzB,GAAG,EAAE,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG;yBAChC,CAAC,EAAA;;oBALF,SAKE,CAAC;oBAEiB,qBAAM,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;4BAC7C,KAAK,OAAA;4BACL,IAAI,MAAA;4BACJ,IAAI,EAAE,gBAAc,IAAM;4BAC1B,IAAI,EAAE,gBAAc,IAAM;4BAC1B,KAAK,OAAA;4BACL,IAAI,MAAA;yBACL,CAAC,EAAA;;oBAPI,WAAW,GAAG,SAOlB;oBACF,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;;;;;;;CAG9B;AAED,IAAI,EAAE;;"}